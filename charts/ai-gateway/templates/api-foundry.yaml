# API definition for Foundry models (OpenAI-compatible)
apiVersion: apimanagement.azure.com/v1api20240501
kind: Api
metadata:
  name: foundry-openai-api
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "ai-gateway.labels" . | nindent 4 }}
spec:
  azureName: foundry-openai-api
  owner:
    name: {{ .Values.apim.name | quote }}
  displayName: "Foundry OpenAI API"
  description: "OpenAI-compatible API for Azure AI Foundry models"
  path: "openai"
  protocols:
    - https
  subscriptionRequired: true
  subscriptionKeyParameterNames:
    header: "api-key"
    query: "api-key"
  serviceUrl: "{{ .Values.foundry.endpoint }}/openai"
  apiType: http
